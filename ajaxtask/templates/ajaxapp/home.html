<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.6.4.js"integrity="sha256-a9jBBRygX1Bh5lt8GZjXDzyOB+bWve9EiO7tROUtj/E="crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <title>Document</title>
</head>
<body>
    <!-- <div class="container"> -->
        <!-- <div class="container-fluid">
        <form action="" method="POST" id="form">
            {% csrf_token %}
            {{form.as_p}}
            <button type="submit" class="btn btn-primary">Submit</button>
        </form>
        </div> -->
    <!-- </div> -->
    <div class="container">
        <div class="row">
            <div class="col" id="data">
                <form action="" method="POST" id="post-form" class="mb-lg-3">
                    {% csrf_token %}
                    <div class="mb-2">
                    <label for="id-name" class="form-label">Name</label>
                    <input type="text" class="form-control" id="id-name" name="name">
                    </div>
                    <div class="mb-2">
                    <label for="id-date" class="form-label">Date Of Birth</label>
                    <input type="date" class="form-control" id="id-date" name="date-of-birth">
                    </div>
                    <div class="mb-2">
                        <label for="id-mobile" class="form-label">Mobile</label>
                        <input type="text" class="form-control" id="id-mobile" name="mobile">
                    </div>
                    <div class="mb-2">
                        <label for="id-area" class="form-label">Area</label>
                        <input type="text" class="form-control" id="id-area" name="area">
                    </div>
                    <div class="mb-2">
                        <label for="id-days" class="form-label">Days</label>
                        <input type="number" class="form-control" id="id-days" name="days">
                    </div>
                    <div class="mb-2">
                        <label for="id-salary" class="form-label">Salary</label>
                        <input type="number" class="form-control" id="id-salary" name="salary" >
                    </div>
                    <button type="submit" class="btn btn-primary">Submit</button>
                </form>
                <button type="submit" class="btn btn-primary" id="submit">Employee Data</button>
            </div>
            <div class="col text-center" >
                <h1></h1>
                <ol id="ol">
                </ol>
            </div>
            <div class="col text-center" id="data1">
                <!-- <h1>Employee data</h1> -->
                <div id="table"></div>
                <!-- <table class="table">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Date Of Birth</th>
                            <th>Mobile</th>
                            <th>Area</th>
                            <th>Days</th>
                            <th>Salary</th>
                        </tr>
                    </thead>
                    <tbody id="display">

                    </tbody>
                </table> -->
            </div>
        </div>
    <!-- </div> -->
<script type="text/javascript">
    // $(document).ready(function(){
    //     $.ajax({
    //         url: 'http://getinfy.com/productCategories',
    //         type: 'GET',
    //         contentType: 'application/json',
    //         headers: {
    //             'Authorization': 'Bearer <token>'
    //         },
    //         success: function (result) {
    //             // CallBack(result);
    //         },
    //         error: function (error) {
    //         }
    //     });
    // })
    $(document).on('submit','#post-form',function(e){

        output = "";
        // preventing default actions
        $("#data1").hide();
        e.preventDefault();
        
        $.ajax({
            type:"POST",
            url:"create/",
            data:{
                Name:$('#id-name').val(),
                Date_of_birth:$('#id-date').val(),
                Mobile:$('#id-mobile').val(),
                Area:$('#id-area').val(),
                Days:$('#id-days').val(),
                Salary:$('#id-salary').val(),
                csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val()
            },
            success: function(data){
                alert(data.message)
                list_data = data.list
                console.log(list_data)
                for(i=0; i<list_data.length; i++){
                    output += "<li>"+list_data[i]+"</li>"
                }
                $("h1").html("Field validaation information")
                $("#ol").html(output)
                // x = data.list_data
                // console.log(x)
                // for(i=0; i<x.length; i++){
                //     output += "<tr><td>"+x[i].name+"</td><td>"+x[i].date_of_birth+"</td><td>"+x[i].mobile+"</td><td>"+x[i].area+"</td><td>"+x[i].days+"</td><td>"+x[i].salary+"</td>"
                // }
                // $("#display").html(output)
                $("#post-form")[0].reset()
                console.log("data submitted successfully")

            },
            error: function(){
                alert("Please fill the below 'fields'");
            },
        });
    });
    $('#submit').click(function(){
        // output = "";
        // $("#data").hide();
        // $("#data1").show();
        // e.preventDefault();
        $.ajax({
            type:"GET",
            url:"details/",
            data:"",
            dataType:"json",
            success:function(data){
                table_data = data.html_string
                console.log(table_data)
                // x = data.list_data
                // // console.log(x)
                // for(i=0; i<x.length; i++){
                //     output += "<tr><td>"+x[i].name+"</td><td>"+x[i].date_of_birth+"</td><td>"+x[i].mobile+"</td><td>"+x[i].area+"</td><td>"+x[i].days+"</td><td>"+x[i].salary+"</td>"
                //  }
                $("#table").append(table_data)
            }
        });
    });
</script>
</body>
</html>